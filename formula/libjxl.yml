summary: A reference implementation of JPEG XL image format (encoder and decoder)
web-url: https://jpeg.org/jpegxl/index.html
src-url: https://github.com/libjxl/libjxl/archive/refs/tags/v0.11.1.tar.gz
src-sha: 1492dfef8dd6c3036446ac3b340005d92ab92f7d48ee3271b5dac1d36945d3d9
license: BSD-3-Clause
dep-pkg: libhwy libbrotli liblcms2 libwebp libgif libpng libjpeg-turbo libopenexr
dep-upp: git

prepare: git_checkout https://github.com/webmproject/sjpeg --ref-from=94e0df6d0f8b44228de5be0ff35efb9f946a13c9 -C third_party/sjpeg

install: |
    cmakew 2 \
        -DJPEGXL_ENABLE_JNI=OFF \
        -DJPEGXL_ENABLE_TOOLS=OFF \
        -DJPEGXL_ENABLE_EXAMPLES=OFF \
        -DJPEGXL_ENABLE_MANPAGES=OFF \
        -DJPEGXL_ENABLE_BENCHMARK=OFF \
        -DJPEGXL_ENABLE_DEVTOOLS=OFF \
        -DJPEGXL_ENABLE_JPEGLI=OFF \
        -DJPEGXL_ENABLE_SKCMS=OFF \
        -DJPEGXL_ENABLE_SJPEG=ON \
        -DJPEGXL_FORCE_SYSTEM_BROTLI=ON \
        -DJPEGXL_FORCE_SYSTEM_LCMS2=ON \
        -DJPEGXL_FORCE_SYSTEM_HWY=ON \
        -DJPEGXL_WARNINGS_AS_ERRORS=OFF \
        -DJPEGXL_VERSION="$PACKAGE_VERSION"
